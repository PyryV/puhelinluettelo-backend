(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(39)},37:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(11),u=n.n(l),o=n(2),s=n(3),c=n.n(s),i="/api/persons",m=function(){return c.a.get(i)},f=function(e){return c.a.post(i,e)},v=function(e){return c.a.delete(i+"/"+e)},E=function(e,t){return c.a.put("".concat(i,"/").concat(e),t).then(function(e){return e.data})},p=function(e){var t=e.name,n=e.number;e.persons,e.setPersons;return r.a.createElement("div",null,t," ",n)},d=function(e){var t=e.persons,n=e.filter,a=e.setPersons,l=[],u=0;if(""!==n)for(var o=0;o<t.length;o++)t[o].name.toUpperCase().startsWith(n.toUpperCase())&&(l[u]=t[o],u++);else l=t;if(void 0!==l)return r.a.createElement("div",null,l.map(function(e){return r.a.createElement(p,{key:e.name,name:e.name,number:e.number,filter:n,persons:t,setPersons:a})}));return r.a.createElement(r.a.Fragment,null)},b=function(e){var t=e.persons,n=e.setPersons,a=e.newName,l=e.setNewName,u=e.newNumber,o=e.setNewNumber,s=e.setMessage,c=e.rName,i=e.setRName,p=e.setErrorMsg,d=function(){for(var e=0;e<t.length;e++)if(t[e].name!==c)return t.splice(e,1)};return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),void 0!==t)for(var r=!1,c=0;c<t.length;c++)t[c].name===a&&(r=!0);if(r){var i=!0;window.confirm("".concat(a," on jo luettelossa. Korvataanko numero uudella?"))&&(E(a,{name:a,number:u,id:a}).then(function(e){n(t.map(function(t){return t.id!==a?t:e})),l(""),o("")}).catch(function(e){i=!1,p("".concat(a," oli jo poistettu luettelosta")),setTimeout(function(){p(null)},5e3),n(d)}),i&&(s("".concat(a," muutettu onnistuneesti")),setTimeout(function(){s(null)},5e3)))}else{var m={name:a,number:u,id:a};f(m).then(function(e){n(void 0!==t?t.concat(e.data):[m]),l(""),o("")}),s("".concat(a," lis\xe4tty onnistuneesti")),setTimeout(function(){s(null)},5e3)}}},r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:a,onChange:function(e){l(e.target.value)}})),r.a.createElement("div",null,"numero: ",r.a.createElement("input",{value:u,onChange:function(e){o(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))),r.a.createElement("h3",null,"Poista henkil\xf6"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();for(var r=!1,l=0;l<t.length;l++)t[l].name===c&&(r=!0);1===t.length&&(t=[]),r?(v(c),m().then(function(e){console.log("promise fullfilled"),console.log(e.data),n(t.filter(function(e){return e.name!==c})),console.log(t),i(""),s("".concat(a," poistettu onnistuneesti")),setTimeout(function(){s(null)},5e3)},[])):(window.alert("".concat(c," ei ole luettelossa")),i(""))}},r.a.createElement("div",null,"poistettava: ",r.a.createElement("input",{value:c,onChange:function(e){i(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"poista"))))},g=function(e){var t=e.filter,n=e.setFilter;return r.a.createElement("form",null,r.a.createElement("div",null,"rajaa nimi\xe4: ",r.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}})))},h=(n(37),function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"success"},t)}),N=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"error"},t)},j=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],l=t[1],u=Object(a.useState)(""),s=Object(o.a)(u,2),c=s[0],i=s[1],f=Object(a.useState)(""),v=Object(o.a)(f,2),E=v[0],p=v[1],j=Object(a.useState)(""),w=Object(o.a)(j,2),O=w[0],S=w[1],P=Object(a.useState)(""),C=Object(o.a)(P,2),k=C[0],y=C[1],M=Object(a.useState)(null),T=Object(o.a)(M,2),F=T[0],D=T[1],J=Object(a.useState)(null),R=Object(o.a)(J,2),U=R[0],x=R[1];return Object(a.useEffect)(function(){console.log("effect"),m().then(function(e){console.log("promise fullfilled"),l(e.data)})},[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(h,{message:F}),r.a.createElement(N,{message:F}),r.a.createElement(g,{filter:k,setFilter:y}),r.a.createElement("h3",null,"Lis\xe4\xe4 uusi:"),r.a.createElement(b,{persons:n,setPersons:l,newName:c,setNewName:i,newNumber:O,setNewNumber:S,message:F,setMessage:D,rName:E,setRName:p,errorMsg:U,setErrorMsg:x}),r.a.createElement("h3",null,"Numerot:"),r.a.createElement("div",null,r.a.createElement(d,{persons:n,filter:k,setPersons:l})))};u.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[12,2,1]]]);
//# sourceMappingURL=main.81720200.chunk.js.map