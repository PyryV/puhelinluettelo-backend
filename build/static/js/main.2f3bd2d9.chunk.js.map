{"version":3,"sources":["services/persons.js","components/Person.js","components/Persons.js","components/PersonForm.js","components/Filter.js","components/App.js","index.js"],"names":["baseUrl","services_persons","axios","get","newObject","post","id","delete","put","concat","then","response","data","Person","_ref","name","number","persons","setPersons","react_default","a","createElement","Persons","filter","newPersons","i","length","toUpperCase","startsWith","undefined","map","person","components_Person","key","Fragment","PersonForm","newName","setNewName","newNumber","setNewNumber","setMessage","rName","setRName","setErrorMsg","removeFromPersons","splice","onSubmit","event","preventDefault","exPerson","find","window","confirm","personService","Object","objectSpread","updatedPerson","setTimeout","catch","error","value","onChange","target","type","console","log","alert","Filter","setFilter","Notification","message","className","Error","_ref2","App","_useState","useState","_useState2","slicedToArray","_useState3","_useState4","_useState5","_useState6","_useState7","_useState8","_useState9","_useState10","_useState11","_useState12","_useState13","_useState14","errorMsg","useEffect","App_Notification","App_Error","components_Filter","components_PersonForm","components_Persons","ReactDOM","render","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.2f3bd2d9.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    return axios.get(baseUrl)\n}\n\nconst create = newObject => {\n    return axios.post(baseUrl, newObject)\n}\n\nconst remove = (id) => {\n    return axios.delete(baseUrl + '/' + id)\n}\n\nconst update = (newObject) => {\n    const request = axios.put(`${baseUrl}/${newObject.id}`, newObject)\n    return request.then(response => response.data)\n}\n\n\nexport default {\n    getAll: getAll,\n    create: create,\n    remove: remove,\n    update: update\n}","import React from 'react'\nimport personService from '../services/persons'\n\nconst Person = ({ name,number,persons,setPersons }) => {\n\n\n  \n  return (\n    <div>\n      {name} {number} \n    </div>\n  )\n\n\n}\n\nexport default Person","import React from 'react'\nimport Person from './Person'\n\nconst Persons = ({ persons,filter,setPersons }) => {\n  var newPersons = []\n  var a = 0;\n  if(filter !== '') {\n    for(var i=0; i<persons.length; i++) {\n      if(persons[i].name.toUpperCase().startsWith(filter.toUpperCase())) {\n        newPersons[a] = persons[i]\n        a++\n      }\n    }\n  } else {\n    newPersons = persons\n  }\n\n  \n  if(newPersons !== undefined) {\n    const rows = () => newPersons.map(person => \n      <Person \n        key={person.name} \n        name={person.name}\n        number={person.number}\n        filter={filter}\n        persons={persons}\n        setPersons={setPersons}\n      />\n    ) \n    return(\n      <div>\n        {rows()}\n      </div>\n    )\n  }\n\n  return (\n    <>\n    </>\n  )\n\n\n\n\n\n}\n\n\n\n\n\nexport default Persons","import React from 'react'\nimport personService from '../services/persons'\n\nconst PersonForm = ({ \n  persons,\n  setPersons,\n  newName,\n  setNewName,\n  newNumber,\n  setNewNumber,\n  setMessage,\n  rName,\n  setRName,\n  setErrorMsg \n}) => {\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const exPerson = persons.find(person => person.name === newName)\n\n\n    if(exPerson) {\n      \n      if(window.confirm(`${newName} on jo luettelossa. Korvataanko numero uudella?`)) {\n      \n        personService\n          .update({\n            ...exPerson,\n            number: newNumber\n          })\n          .then( updatedPerson => {\n            setPersons(persons.map(person => person.name === newName ? updatedPerson : person))\n            setNewName('')\n            setNewNumber('')\n            setMessage(`${newName} muutettu onnistuneesti`)\n            setTimeout(() => {\n              setMessage(null)\n            }, 3000)\n          })\n          .catch(error => {\n            setErrorMsg(`${newName} oli jo poistettu luettelosta`)\n            setTimeout(() => {\n              setErrorMsg(null)\n            }, 5000)\n            setPersons(removeFromPersons)\n            \n          })\n\n          \n      }\n    } else {\n      const person = {\n        name: newName,\n        number: newNumber,\n        id: newName\n      }\n      personService\n        .create(person)\n        .then(response => {\n          if(persons !== undefined) {\n            setPersons(persons.concat(response.data))\n          } else {\n            setPersons([person])\n          }\n          \n          setNewName('')\n          setNewNumber('')\n        })\n      setMessage(`${newName} lisätty onnistuneesti`)\n      setTimeout(() => {\n        setMessage(null)\n      }, 5000)\n    }  \n  }\n\n  const removePerson = (event) => {\n    event.preventDefault()\n    var person\n    var a = false;\n    for(var i=0; i<persons.length; i++) {\n      if(persons[i]['name'] === rName) {\n        a = true\n        const person = persons[i]\n      } \n    }\n    if(persons.length === 1) {\n      persons = []\n    }\n\n    if(a) {\n      personService\n        .remove(person.id)\n      personService\n        .getAll()\n        .then(response => {\n          console.log('promise fullfilled')\n          console.log(response.data)\n          \n          setPersons(persons.filter(person => person.name !== rName))\n          console.log(persons)\n          setRName('')\n          setMessage(`${newName} poistettu onnistuneesti`)\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n    }, [])\n    } else {\n      window.alert(`${rName} ei ole luettelossa`)\n      setRName('')\n    }\n    \n  }\n\n  const removeFromPersons = () => {\n    for(var i=0; i<persons.length; i++) {\n      if(persons[i].name !== rName) {\n        return persons.splice(i, 1)\n      }\n    }\n  }\n\n  const handleNewName = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNewNumber = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleRName = (event) => {\n    setRName(event.target.value)\n  }\n\n  return(\n    <div>\n\n\n      <form onSubmit={addPerson}>\n        <div>\n          nimi: <input value={newName} onChange={handleNewName} />\n        </div>\n        <div>\n          numero: <input value={newNumber} onChange={handleNewNumber}/>\n        </div>\n        <div>\n          <button type=\"submit\">lisää</button>\n        </div>\n      </form>\n      <h3>Poista henkilö</h3>\n      <form onSubmit={removePerson}>\n        <div>\n          poistettava: <input value={rName} onChange={handleRName} />\n        </div>\n        <div>\n          <button type=\"submit\">poista</button>\n        </div>\n\n      </form>\n    </div>\n  )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Filter = ({ filter,setFilter }) => {\n\n  const handleFilter = (event) => {\n    setFilter(event.target.value)\n  } \n\n  return(\n    <form>\n      <div>\n        rajaa nimiä: <input value={filter} onChange={handleFilter}/>\n      </div>\n    </form>\n  )\n}\n\nexport default Filter","import React, { useState, useEffect } from 'react'\nimport Persons from './Persons'\nimport PersonForm from './PersonForm'\nimport Filter from './Filter'\nimport personService from '../services/persons'\nimport '../index.css'\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"success\">\n      {message}\n    </div>\n  )\n}\n\nconst Error = ({ message }) => {\n  if(message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ rName, setRName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter,setFilter ] = useState('')\n  const [ message, setMessage ] = useState(null)\n  const [ errorMsg, setErrorMsg ] = useState(null)\n\n  useEffect(() => {\n    console.log('effect')\n    personService\n      .getAll()\n      .then(response => {\n        console.log('promise fullfilled')\n        setPersons(response.data)\n      })\n  }, [])\n\n  \n\n\n\n  return (\n    <div>\n      <h2>Puhelinluettelo</h2>\n      <Notification message={message} />\n      <Error message={message}/>\n      <Filter \n        filter={filter}\n        setFilter={setFilter}\n      />\n      <h3>Lisää uusi:</h3>\n      <PersonForm \n        persons={persons}\n        setPersons={setPersons}\n        newName={newName}\n        setNewName={setNewName}\n        newNumber={newNumber}\n        setNewNumber={setNewNumber}\n        message={message}\n        setMessage={setMessage}\n        rName={rName}\n        setRName={setRName}\n        errorMsg={errorMsg}\n        setErrorMsg={setErrorMsg}\n      />\n      <h3>Numerot:</h3>\n      <div>\n        <Persons \n          persons={persons} \n          filter={filter} \n          setPersons={setPersons}\n        />\n      </div>\n    </div>\n  )\n\n}\n\n\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}